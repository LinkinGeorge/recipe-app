<ion-header>
  <ion-navbar color="primary">
    <ion-title>{{ recipe.title }}</ion-title>
    <ion-buttons end>
      <button ion-button icon-only (click)="showMenu($event)">
        <ion-icon name="more"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content padding *ngIf="recipe">
  <h1 text-center margin text-wrap>{{ recipe.title }}</h1>
  <img *ngIf="recipe.heroImage" class="img-fullwidth" src="{{recipe.heroImage}}" alt="{{recipe.title}}" [hidden]="!heroLoaded" (load)="heroLoaded = true"> 
  <ion-grid>
    <ion-row>
      <ion-col col-12>
        <number-picker [start]="recipe.servings" [caption]="'Portionen'" [captionSingular]="'Portion'" (onChange)="servingsChange($event)"></number-picker>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col col-12>
        <ion-label *ngIf="recipe.categories" text-right text-wrap><span *ngFor="let ctg of recipe.categories"> #<strong>{{ ctg }}</strong> </span></ion-label>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col col-6>
        <ion-icon name="time" style="padding-right: 0.5rem"></ion-icon><span> {{ recipe.duration }} Minuten</span>
      </ion-col>
      <ion-col col-6 text-right padding-right>
        <ion-icon name="star-outline" style="padding-right: 0.5rem"></ion-icon><span> {{ recipe.difficulty | difficultyString }}</span>
      </ion-col>
    </ion-row>
</ion-grid>
<h2 text-center margin-bottom>Zutaten</h2>
<ion-list>
    <button ion-item *ngFor="let ingr of recipe.ingredients" text-wrap>
      <ion-icon name="cart" item-right (click)="addToList(ingredient.textContent)" color="dark"></ion-icon>
      <span #ingredient>
        <span>{{ ingr.name | calcServings:recipe.servings:servings }}</span>
        <span *ngIf="ingr.hint" class="ml-1">({{ ingr.hint }})</span>
      </span>
    </button>
</ion-list>
<div text-center>
  <button ion-button (click)="showConverter()">
    <ion-label>Umrechner</ion-label>
    <ion-icon name="refresh"></ion-icon>
  </button>
</div>
<h2 text-center margin-bottom>Beschreibung</h2>
<ion-card *ngIf="recipe.description">
  <ion-card-content>
    <markdown *ngIf="recipe.description">{{ recipe.description }}</markdown>
  </ion-card-content>
</ion-card>
<ion-card class="card-background-page">
  <img *ngIf="recipe.descrImage" src="{{ recipe.descrImage }}" [hidden]="!descrLoaded" (load)="descrLoaded = true">
</ion-card>
</ion-content>
